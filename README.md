# NewsPaper

Django-приложение для создания и управления новостями и статьями.

## Функциональность

- Регистрация и аутентификация пользователей
- Авторизация через Google
- Создание, редактирование и удаление новостей и статей
- Комментирование
- Лайки и дизлайки
- Разделение прав доступа (обычные пользователи и авторы)
- Подписка на категории новостей
- Email-уведомления:
  - Приветственное письмо при регистрации
  - Уведомления о новых публикациях в подписанных категориях
  - Еженедельная рассылка новых публикаций

## Установка

1. Клонируйте репозиторий:
```bash
git clone git@github.com:AGembickiy/Task_D6-NewsPaper.git
```

2. Создайте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
# или
venv\Scripts\activate  # для Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Примените миграции:
```bash
python manage.py migrate
```

5. Создайте суперпользователя:
```bash
python manage.py createsuperuser
```

6. Настройте email в settings.py:
```python
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_PORT = 587
EMAIL_USE_TLS = True
EMAIL_HOST_USER = 'ваш-email@gmail.com'
EMAIL_HOST_PASSWORD = 'ваш-пароль-приложения'
DEFAULT_FROM_EMAIL = EMAIL_HOST_USER
```

7. Запустите сервер разработки:
```bash
python manage.py runserver
```

## Управление рассылками

### Отправка приветственных писем существующим пользователям
```bash
python manage.py send_welcome_emails
```

### Настройка еженедельной рассылки
Для Linux добавьте в crontab:
```bash
0 8 * * 0 cd /path/to/project && python manage.py send_weekly_digest
```

## Структура проекта

```
NewsPaper/
├── news/                    # Основное приложение
│   ├── management/         # Команды управления
│   │   └── commands/      # Скрипты рассылок
│   └── templates/         # Шаблоны
│       └── email/        # Шаблоны писем
├── templates/              # Общие шаблоны
├── static/                # Статические файлы
└── NewsPaper/             # Настройки проекта
```

## Email-функциональность

### Приветственное письмо
- Отправляется автоматически при регистрации
- Содержит информацию о возможностях портала
- Включает ссылки на основные разделы

### Уведомления о новых публикациях
- Мгновенные уведомления при публикации в подписанной категории
- Содержит заголовок, превью и ссылку на полную статью

### Еженедельная рассылка
- Отправляется каждое воскресенье
- Содержит список всех новых публикаций за неделю
- Группируется по категориям
- Включает ссылки на все статьи

## Лицензия

MIT 
